# Git

## Git åŸºæœ¬æ¦‚å¿µèªªæ˜

### Git æ˜¯ä»€éº¼ï¼Ÿ

- Git æ˜¯ä¸€å€‹åˆ†æ•£å¼ç‰ˆæœ¬æ§åˆ¶ç³»çµ± (DVCS)ï¼Œä¸»è¦ç”¨ä¾†è¿½è¹¤æª”æ¡ˆè®ŠåŒ–ï¼Œå°¤å…¶æ˜¯ç¨‹å¼ç¢¼ã€‚
- æ¯å€‹äººæœ¬åœ°ç«¯éƒ½æœ‰å®Œæ•´çš„ç‰ˆæœ¬æ­·å² â†’ ä¸ä¾è³´ä¸­å¤®ä¼ºæœå™¨ä¹Ÿèƒ½å·¥ä½œã€‚

---

### ä¸‰å¤§å€åŸŸ (å·¥ä½œæµç¨‹æ ¸å¿ƒ)

Git æŠŠæª”æ¡ˆç®¡ç†åˆ†ç‚ºä¸‰å€‹å€åŸŸï¼šğŸ‘‰ æµç¨‹ï¼šÂ **`å·¥ä½œç›®éŒ„ â†’ git add â†’ æš«å­˜å€ â†’ git commit â†’ å„²å­˜åº«`**

1. å·¥ä½œç›®éŒ„ (Working Directory)
    - ä½ å¯¦éš›ç·¨è¼¯æª”æ¡ˆçš„åœ°æ–¹ã€‚
    - å¯ä»¥ä¿®æ”¹ã€å»ºç«‹ã€åˆªé™¤æª”æ¡ˆã€‚
2. æš«å­˜å€ (Staging Area / Index)
    - é€éÂ `git add`Â æ”¾é€²ä¾†çš„æª”æ¡ˆã€‚
    - è¡¨ç¤ºã€Œæº–å‚™å¥½è¦æäº¤çš„è®Šæ›´ã€ã€‚
3. å„²å­˜åº« (Repository / .git ç›®éŒ„)
    - é€éÂ `git commit`Â æŠŠæš«å­˜å€çš„å…§å®¹æ°¸ä¹…è¨˜éŒ„ä¸‹ä¾†ã€‚
    - åŒ…å«å®Œæ•´æ­·å²è¨˜éŒ„ (commits, branches, tags)ã€‚

---

### ç‰ˆæœ¬æ§åˆ¶ (Commits)

- Commit å°±åƒæ˜¯ä¸€å€‹ã€Œä»£ç¢¼å¿«ç…§ã€ (snapshot)ã€‚
- æ¯æ¬¡ Commit éƒ½æœ‰ï¼š
    - å”¯ä¸€çš„Â SHA-1 ID
    - æäº¤è¨Šæ¯
    - ä½œè€…è³‡è¨Š
    - æŒ‡å‘ã€Œå‰ä¸€å€‹ Commitã€çš„é€£çµ (å½¢æˆæ™‚é–“ç·š/æ¨¹ç‹€çµæ§‹)ã€‚

---

### åˆ†æ”¯ (Branches)

- åˆ†æ”¯æ˜¯æŒ‡å‘ Commit çš„æŒ‡æ¨™ (Pointer)ã€‚
- é è¨­åˆ†æ”¯ï¼š`main`Â (èˆŠç‰ˆæ˜¯Â `master`)ã€‚
- æ–°å»ºåˆ†æ”¯ï¼šç›¸ç•¶æ–¼å»ºç«‹ä¸€æ¢ã€Œé–‹ç™¼æ”¯ç·šã€ï¼Œä¸æœƒå½±éŸ¿ä¸»ç·šã€‚
- å¸¸è¦‹å·¥ä½œæµï¼š
    - `main`Â /Â `master`Â â†’ ç©©å®šç‰ˆæœ¬
    - `develop`Â â†’ ä¸»è¦é–‹ç™¼ç·š
    - `feature/*`Â â†’ åŠŸèƒ½åˆ†æ”¯
    - `hotfix/*`Â â†’ ç·Šæ€¥ä¿®è£œ

---

### åˆä½µ (Merge / Rebase)

- Mergeï¼šæŠŠå…©å€‹åˆ†æ”¯æ­·å²åˆä½µåœ¨ä¸€èµ·ã€‚
    - `git merge`Â â†’ å¯ä»¥ç”¢ç”Ÿä¸€å€‹ã€Œåˆä½µæäº¤ã€ã€‚
    - `git merge --no-ff`Â â†’ ä¿ç•™å®Œæ•´åˆä½µç´€éŒ„ã€‚
- Rebaseï¼šæŠŠä¸€æ¢åˆ†æ”¯ç§»å‹•åˆ°å¦ä¸€æ¢åˆ†æ”¯çš„æœ€æ–°é»ä¸Šã€‚
    - æ¸…çˆ½ç·šæ€§ç´€éŒ„ï¼Œä½†æœƒæ”¹æ­·å² (è¦å°å¿ƒ)ã€‚

---

### é ç«¯å„²å­˜åº« (Remote)

- é ç«¯æ˜¯å¦ä¸€å€‹ Repositoryï¼Œé€šå¸¸åœ¨ä¼ºæœå™¨ (GitHub / GitLab / Gitea)ã€‚
- å¸¸è¦‹æŒ‡ä»¤ï¼š
    - `git clone`Â â†’ è¤‡è£½é ç«¯åº«
    - `git remote add origin <url>`Â â†’ æ–°å¢é ç«¯
    - `git push`Â â†’ æŠŠæœ¬åœ°æäº¤æ¨ä¸Šå»
    - `git pull`Â â†’ æŠŠé ç«¯è³‡æ–™æŠ“ä¸‹ä¾†ã€åˆä½µåˆ°æœ¬åœ°
    - `git fetch`Â â†’ å–®ç´”æŠ“è³‡æ–™ (ä¸åˆä½µ)

---

### Tag (æ¨™ç±¤)

- æ¨™ç±¤æ˜¯ç”¨ä¾†æ¨™è¨˜ Commit çš„ã€Œç‰¹æ®Šåç¨±ã€ã€‚
- å¸¸ç”¨åœ¨ç‰ˆæœ¬ç®¡ç†ï¼Œä¾‹å¦‚Â `v1.0.0`ã€‚
- æœ‰å…©ç¨®ï¼š
    - è¼•é‡æ¨™ç±¤ï¼šåªæ˜¯æŒ‡å‘æŸå€‹æäº¤ã€‚
    - é™„è¨»æ¨™ç±¤ï¼šå¸¶æœ‰è¨Šæ¯ã€æ™‚é–“ã€ç°½åã€‚

---

### Stash (æš«å­˜å·¥ä½œé€²åº¦)

- å ´æ™¯ï¼šå·¥ä½œåˆ°ä¸€åŠä½†éœ€è¦åˆ‡æ›åˆ†æ”¯ â†’ åˆä¸æƒ³ Commit åŠæˆå“ã€‚
- è§£æ³•ï¼š
    
    `bashgit stash       *# æš«å­˜è®Šæ›´*
    git stash pop   *# å–å›*`
    

---

## å¸¸è¦‹å·¥ä½œæµ (å¯¦å‹™)

1. Clone or å»ºç«‹æœ¬åœ°åº«
2. ä¿®æ”¹æª”æ¡ˆ
3. **`git add`**Â â†’ æ”¾é€²æš«å­˜å€
4. **`git commit`**Â â†’ å»ºç«‹ç‰ˆæœ¬å¿«ç…§
5. **`git push`**Â â†’ æ¨é€åˆ°é ç«¯
6. **`git pull`**Â /Â **`git fetch`**Â â†’ èˆ‡åœ˜éšŠåŒæ­¥

---

## Git å¸¸ç”¨æŒ‡ä»¤æ•´ç† (Cheat Sheet)

### åŸºæœ¬è¨­å®š

```bash
git config --global user.name "<ä½¿ç”¨è€…åå­—>"
git config --global user.email "<é›»å­ä¿¡ç®±>"
```

> å»ºè­°åŠ ä¸Š git config --global init.defaultBranch mainï¼Œ
> 
> 
> é¿å…ä¸åŒ Git ç‰ˆæœ¬é è¨­åˆ†æ”¯ä¸ä¸€è‡´ (master / main å•é¡Œ)ã€‚
> 

### æ–°å¢å„²å­˜åº«

```bash
git init                *# åˆå§‹åŒ–æœ¬åœ°å„²å­˜åº«*
git init --bare         *# å»ºç«‹è£¸åº« (é€šå¸¸ç”¨æ–¼ä¼ºæœå™¨ç«¯å…±äº«)*
```

> æœ¬åœ°å„²å­˜åº« (å·¥ä½œç›®éŒ„ä¸‹çš„ .git)ï¼šåŒ…å« ç‰ˆæœ¬è³‡è¨Š + ç´¢å¼• (Index/Stage) + ç‹€æ…‹è³‡è¨Š
å…±ç”¨å„²å­˜åº« (bare repository)ï¼šåªæœ‰ ç‰ˆæœ¬ç‰©ä»¶ (Objects)ï¼Œæ²’æœ‰å·¥ä½œç›®éŒ„ã€‚å¸¸ç”¨æ–¼ é ç«¯/ä¼ºæœå™¨ã€‚
> 

### ç‹€æ…‹æª¢æŸ¥èˆ‡æ“ä½œ

```bash
git status              *# æŸ¥çœ‹ç›®å‰ç‹€æ…‹*
git add <file>...       *# åŠ å…¥æª”æ¡ˆåˆ°æš«å­˜å€*
git commit -m "è¨Šæ¯"    *# æäº¤*
git log                 *# æŸ¥çœ‹æäº¤æ­·å²*
gitk                    *# åœ–å½¢åŒ–æ­·å² (éœ€å®‰è£ gitk)*
```

### æª”æ¡ˆèˆ‡ç‰ˆæœ¬å›æº¯

```bash
git checkout <branch|commit|file>      *# åˆ‡æ›åˆ†æ”¯ / å›å¾©æª”æ¡ˆ*
git reset --soft <commit>              *# ä¿ç•™å·¥ä½œç›®éŒ„èˆ‡æš«å­˜ï¼Œå›åˆ°ç‰¹å®šæäº¤*
git reset --hard <commit>              *# ç§»é™¤æ‰€æœ‰è®Šæ›´ï¼Œå›åˆ°ç‰¹å®šæäº¤*
git revert <commit>                    *# å»ºç«‹æ–°æäº¤ï¼Œæ’¤éŠ·æŸæ¬¡æäº¤ (å®‰å…¨åšæ³•)*
```

### åˆ†æ”¯ (Branch)

- **å»ºç«‹ã€åˆ‡æ›**
    
    ```bash
    git branch <branch>                    *# å»ºç«‹åˆ†æ”¯*
    git checkout <branch>                  *# åˆ‡æ›åˆ†æ”¯*
    git checkout -b <branch>               *# å»ºç«‹ + åˆ‡æ›*
    ```
    
- **åˆªé™¤**
    
    ```bash
    git branch -d <branch>                 *# åˆªé™¤åˆ†æ”¯ (åƒ…å·²åˆä½µ)*
    git branch -D <branch>                 *# å¼·åˆ¶åˆªé™¤ (å³ä¾¿æœªåˆä½µ)*
    ```
    
- **åˆä½µ**
    
    ```bash
    git checkout master
    git merge hotfix                       *# æ¨™æº–åˆä½µ*
    git merge --no-ff hotfix               *# ä¿ç•™åˆä½µç´€éŒ„*
    git reset --hard ORIG_HEAD             *# å›å¾©åˆä½µå‰ç‹€æ…‹*
    ```
    

### æ¨™ç±¤ (Tag)

```bash
git tag <tag>                          *# å»ºç«‹è¼•é‡æ¨™ç±¤*
git tag -a <tag> -m "è¨Šæ¯"             *# å»ºç«‹é™„è¨»æ¨™ç±¤*
git show <tag>                         *# æŸ¥çœ‹æ¨™ç±¤å°æ‡‰æäº¤*
git push origin <tag>                  *# æ¨é€æŒ‡å®šæ¨™ç±¤*
git push origin --tags                 *# æ¨é€æ‰€æœ‰æ¨™ç±¤*
```

### é ç«¯æ“ä½œ

- `git push -u <remote name> <branch name>`åƒæ•¸ -u ç­‰åŒæ–¼ --set-upstreamï¼Œè¨­å®š upstream å¯ä»¥ä½¿åˆ†æ”¯é–‹å§‹è¿½è¹¤æŒ‡å®šçš„é ç«¯åˆ†æ”¯ã€‚æ›å¥è©±èªªï¼Œå®ƒæœƒå°‡æœ¬åœ°åˆ†æ”¯èˆ‡é ç«¯åˆ†æ”¯å»ºç«‹ä¸€å€‹é—œè¯ï¼Œè®“ä½ åœ¨ä¸‹æ¬¡æ¨é€æ™‚å¯ä»¥ç›´æ¥ä½¿ç”¨ **`git push`**ï¼Œè€Œä¸éœ€è¦æŒ‡å®šé ç«¯åç¨±å’Œåˆ†æ”¯åç¨±ã€‚
    
    ```bash
    git remote -v                          *# æŸ¥çœ‹é ç«¯*
    git remote add <name> <url>            *# æ–°å¢é ç«¯*
    git remote set-url --add <name> <url>  *# å¢åŠ å¦ä¸€å€‹ URL*
    git remote rm <name>                   *# ç§»é™¤é ç«¯*
    git remote rename <old> <new>          *# é‡æ–°å‘½åé ç«¯*
    ```
    
- **æ¨é€ / æ‹‰å–**
    
    ```bash
    git branch -a                          *# æŸ¥çœ‹æœ¬åœ°èˆ‡é ç«¯åˆ†æ”¯*
    git push <remote> <branch>             *# æ¨é€åˆ†æ”¯*
    git push -u <remote> <branch>          *# æ¨é€ + è¨­å®šè¿½è¹¤ (ä¹‹å¾Œå¯ç›´æ¥ git push)*
    git pull                               *# æ‹‰å–ä¸¦åˆä½µ*
    git fetch                              *# åªæŠ“é ç«¯è³‡æ–™ä¸åˆä½µ*
    ```
    

### æš«å­˜ (stash)

```bash
git stash                              *# æš«å­˜å·²è¿½è¹¤æª”æ¡ˆï¼ˆStage å€ï¼‰*
git stash -u                           *# åŒ…å«æœªè¿½è¹¤æª”æ¡ˆ (WD + Stage)*
git stash save -u "è¨Šæ¯"               *# æš«å­˜ + è¨»è§£*
git stash pop                          *# å–å‡ºæœ€è¿‘çš„æš«å­˜ä¸¦åˆªé™¤*
git stash list                         *# æŸ¥çœ‹æš«å­˜æ¸…å–®*
git stash clear                        *# æ¸…é™¤æ‰€æœ‰æš«å­˜*
```

## å¯¦å‹™ (å»ºè­°è£œå……)

- ä½¿ç”¨ `.gitignore` é¿å…æäº¤ä¸å¿…è¦æª”æ¡ˆï¼ˆå¦‚ IDE è¨­å®šã€ç·¨è­¯è¼¸å‡ºï¼‰ã€‚
- åœ¨å¤šäººé–‹ç™¼æ™‚ï¼šå»ºåˆ†æ”¯ â†’ é–‹ç™¼ â†’ Commit â†’ Pull Request â†’ Mergeï¼Œé¿å…ç›´æ¥æ”¹ master/mainã€‚
- é¿å…æ¿«ç”¨ `git push -f`ï¼Œå› ç‚ºæœƒè¦†è“‹é ç«¯æ­·å²ï¼Œå®¹æ˜“å®³éšŠå‹ç—›è‹¦ã€‚
- å¦‚æœè¦å›åˆ°ä¹‹å‰çš„ç‹€æ…‹ä½†åˆæƒ³ä¿ç•™æ­·å²ï¼Œ**å„ªå…ˆç”¨ `git revert` è€Œé reset**ã€‚
- `git log --oneline --graph --decorate --all` â†’ å¾ˆæ–¹ä¾¿æŸ¥çœ‹åˆ†æ”¯åˆä½µæ¨¹ç‹€çµæ§‹ã€‚

## å…¶ä»–ä¸»é¡Œ

[Git Flow](Git%20aa131d5ced774c61944cac70d7066f18/Git%20Flow%20257ba20dd64b8088bd4de01be2fd2291.md)

[Git Submodule](Git%20aa131d5ced774c61944cac70d7066f18/Git%20Submodule%20257ba20dd64b800c8cf9e7ca636a69e3.md)

[**èªç¾©åŒ–ç‰ˆæœ¬è™Ÿ**](Git%20aa131d5ced774c61944cac70d7066f18/%E8%AA%9E%E7%BE%A9%E5%8C%96%E7%89%88%E6%9C%AC%E8%99%9F%20257ba20dd64b806a9505dc6748fd21ee.md)

[bonobo git server on docker](Git%20aa131d5ced774c61944cac70d7066f18/bonobo%20git%20server%20on%20docker%20257ba20dd64b809ca457e73ce40992e4.md)

[Using multiple **GitHub** accounts on one computer](Git%20aa131d5ced774c61944cac70d7066f18/Using%20multiple%20GitHub%20accounts%20on%20one%20computer%20257ba20dd64b80408874efa20babcb46.md)